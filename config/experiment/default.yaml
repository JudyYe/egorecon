# @package _global_

coord: 'camera'  # right_wrist
general: 
  rerun: false
  wandb: false
  train_num_steps: 1_000_000
  vis_every: 20000  # vis_every = k* eval_every  but can be divisible by eval_every
  eval_every: 20000
  save_and_sample_every: 20000


train:
  lr: 2e-4
  batch_size: 32
  ema_decay: 0.995
  step_start_ema: 10000
  ema_update_every: 10
  warmup: 5000
  start_mask_step: 1000000

loss:
  w_contact: 1. 
  w_rel_contact: 0.
  w_smoothness: 0.1
  w_consistency: 0.1
  w_static: 0.1
  
condition: 
  noisy_obj: true
  bps: 0
bps_per_t_start: 400  

output:
  contact: true

hand: cond  # cond / out
hand_rep: joint  # theta or motion_rep or joint


dyn_only: false

model: 
  window: 120
  n_dec_layers: 4
  n_head: 4
  d_k: 256
  d_v: 256
  d_model: 512
  objective: pred_x0

datasets:
  t0: 0
  one_window: false
  noise_scheme: syn
  split: mini
  test_split: mini

  augument:
    motion_threshold: 0.05
    
    noise_std_obj_rot: 2
    noise_std_obj_trans: 0.1
    noise_std_mano_global_rot: 2
    noise_std_mano_body_rot: 2
    noise_std_mano_trans: 0.1
    noise_std_mano_betas: 0.2

    use_constant_noise: true
    traj_std_obj_rot: 2
    traj_std_obj_trans: 0.3

    aug_world: false
    aug_cano: true
    use_aug_cano: 0.5



# traindata:
#   data_root_folder: ${paths.data_dir}
#   data_path: ${traindata.data_root_folder}/HOT3D/pred_pose/all_dataset.pkl
#   demo_id: null
#   target_object_id: null

# testdata:
#   data_root_folder: ${paths.data_dir}
#   data_path: ${testdata.data_root_folder}/HOT3D/pred_pose/mini_P0001_624f2ba9_3d.npz
#   demo_id: P0001_624f2ba9
#   target_object_id: 96945373046044+253405647833885+225397651484143

ds_type: w_geom

guide:
  hint: reproj_cd

legacy_bps: false


mask_dropout:
  one_hand: 0.2  # two hands are all masked out: 0.2*0.2 = 0.04
  use_mask: 0.5
  max_infill_ratio: 0.2  # 18% of the hand trajectory is masked out on average